# GPSシステムの基礎について
## 1. GNSSとGPS
- **GNSS (Global Navigation Satellite System)** は、地球規模で測位・時刻供給を行う人工衛星の総称です。  
- **GPS (Global Positioning System)** はアメリカが運用する GNSS の 1 つで、24 機以上の衛星を用いて 24 時間・地球全域をカバーします。

## 2. システム構成（3 つのセグメント）
| セグメント | 役割 | 主な構成要素 |
|------------|------|--------------|
| 宇宙（Space） | 信号送信 | 軌道高度約 20,200 km・軌道周期 11h58m の衛星群 |
| 地上制御（Control） | 軌道・時計管理 | マスター制御局、モニタ局、アンテナ局 |
| ユーザ（User） | 受信・演算 | GNSS 受信機、スマートフォン、Raspberry Pi など |

## 3. 信号構造と周波数
| 周波数 | 名称 | 主信号 | メモ |
|--------|------|--------|------|
| 1575.42 MHz | L1 | C/A コード (民生)、P(Y) コード (軍用) | 標準単周波受信機は主に C/A を用いる |
| 1227.60 MHz | L2 | P(Y)、L2C | 2 周波数での電離層補正が可能 |
| 1176.45 MHz | L5 | I5/Q5 | 航空用高精度チャンネル |

衛星は 1 ms 周期の擬似ランダム系列（PRN）を載せた拡散スペクトル信号を連続送信します。

## 4. 位置計算と時刻
受信機は 4 機以上の衛星から **擬似距離 (ρ)** を測定し、以下の連立方程式を解くことで 3 次元座標 (x, y, z) と **受信機時計オフセット (δt)** を同時に求めます。

$$
ρ_i = \sqrt{(x_i - x)^2 + (y_i - y)^2 + (z_i - z)^2} + c\,δt
$$

ここで *c* は光速度。  
δt を補正する副産物として、UTC ±(10–40 ns) の時刻が得られます。

## 5. 1 PPS (Pulse‑Per‑Second)
ほとんどの測位モジュールは測定結果をもとに「次の正秒を示すパルス」を出力します。  
- 立ち上がり／立ち下がりエッジの時間精度：**±10 ns–100 ns**  
- 幅：10 µs–100 ms（モジュールによる）

## 6. 誤差要因
| 種類 | 典型値 | 抑制法 |
|------|--------|--------|
| 衛星時計誤差 | < ±10 ns | 衛星内 atomic clock＋地上制御で定期補正 |
| 軌道予報誤差 | 数 m | 精密軌道歴 (SP3) を使用 |
| 電離層遅延 | 数 m（単周波） | デュアル周波数受信／モデル補正 |
| 多重反射 (マルチパス) | 0–10 m | 空間フィルタ、アンテナ設置工夫 |
| 受信機ノイズ | 0.1–1 m | 高 SN 比アンテナ、AGC |

## 7. GPS 時間と UTC
- **GPST** は 1980‑01‑06 を時刻原点とし、うるう秒を挿入しません。  
- **UTC** とは現在 18 秒ずれており、衛星は “UTC‑GPST 差 (Δt₍UTC₋GPS₎)” をナビメッセージで配信します。  
- 受信機はこの差を差し引くことで即座に UTC を復元できます。

## 8. 参考リンク
- U.S. Naval Observatory ― GPS Time Service
- IS‑GPS‑200 : NAVSTAR GPS L1 C/A Interface Spec
